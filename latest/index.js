!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FlatBinaryDecoder=t():e.FlatBinaryDecoder=t()}(this,(()=>(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};let r,n,i;e.r(t),e.d(t,{decodeFlatUplc:()=>nr,decodeFlatUplcToObject:()=>ir});try{r=new TextDecoder}catch(e){}let o=0;const a=[],u=57342,s=57343,c=57337,l={};let f,y,d,h,p,b,v,g=a,m=0,w={},S=0,k=0,A=[],O=[],j={useRecords:!1,mapsAsObjects:!0},I=!1,B=2;try{new Function("")}catch(e){B=1/0}class E{constructor(e){if(e&&(!e.keyMap&&!e._keyMap||e.useRecords||(e.useRecords=!1,e.mapsAsObjects=!0),!1===e.useRecords&&void 0===e.mapsAsObjects&&(e.mapsAsObjects=!0),e.getStructures&&(e.getShared=e.getStructures),e.getShared&&!e.structures&&((e.structures=[]).uninitialized=!0),e.keyMap)){this.mapKey=new Map;for(let[t,r]of Object.entries(e.keyMap))this.mapKey.set(r,t)}Object.assign(this,e)}decodeKey(e){return this.keyMap&&this.mapKey.get(e)||e}encodeKey(e){return this.keyMap&&this.keyMap.hasOwnProperty(e)?this.keyMap[e]:e}encodeKeys(e){if(!this._keyMap)return e;let t=new Map;for(let[r,n]of Object.entries(e))t.set(this._keyMap.hasOwnProperty(r)?this._keyMap[r]:r,n);return t}decodeKeys(e){if(!this._keyMap||"Map"!=e.constructor.name)return e;if(!this._mapKey){this._mapKey=new Map;for(let[e,t]of Object.entries(this._keyMap))this._mapKey.set(t,e)}let t={};return e.forEach(((e,r)=>t[_(this._mapKey.has(r)?this._mapKey.get(r):r)]=e)),t}mapDecode(e,t){let r=this.decode(e);return this._keyMap&&"Array"===r.constructor.name?r.map((e=>this.decodeKeys(e))):r}decode(e,t){if(n)return Q((()=>(X(),this?this.decode(e,t):E.prototype.decode.call(j,e,t))));i=t>-1?t:e.length,o=0,m=0,k=0,y=null,g=a,d=null,n=e;try{b=e.dataView||(e.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength))}catch(t){if(n=null,e instanceof Uint8Array)throw t;throw new Error("Source must be a Uint8Array or Buffer but was a "+(e&&"object"==typeof e?e.constructor.name:typeof e))}if(this instanceof E){if(w=this,p=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return f=this.structures,P();(!f||f.length>0)&&(f=[])}else w=j,(!f||f.length>0)&&(f=[]),p=null;return P()}decodeMultiple(e,t){let r,n=0;try{let i=e.length;I=!0;let a=this?this.decode(e,i):te.decode(e,i);if(!t){for(r=[a];o<i;)n=o,r.push(P());return r}if(!1===t(a))return;for(;o<i;)if(n=o,!1===t(P()))return}catch(e){throw e.lastPosition=n,e.values=r,e}finally{I=!1,X()}}}function P(){try{let e=U();if(d){if(o>=d.postBundlePosition){let e=new Error("Unexpected bundle position");throw e.incomplete=!0,e}o=d.postBundlePosition,d=null}if(o==i)f=null,n=null,h&&(h=null);else{if(o>i){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}if(!I)throw new Error("Data read, but end of buffer not reached")}return e}catch(e){throw X(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function U(){let e=n[o++],t=e>>5;if(e&=31,e>23)switch(e){case 24:e=n[o++];break;case 25:if(7==t)return function(){let e=n[o++],t=n[o++],r=(127&e)>>2;if(31===r)return t||3&e?NaN:128&e?-1/0:1/0;if(0===r){let r=((3&e)<<8|t)/(1<<24);return 128&e?-r:r}return C[3]=128&e|56+(r>>1),C[2]=(7&e)<<5|t>>3,C[1]=t<<5,C[0]=0,F[0]}();e=b.getUint16(o),o+=2;break;case 26:if(7==t){let e=b.getFloat32(o);if(w.useFloat32>2){let t=ee[(127&n[o])<<1|n[o+1]>>7];return o+=4,(t*e+(e>0?.5:-.5)>>0)/t}return o+=4,e}e=b.getUint32(o),o+=4;break;case 27:if(7==t){let e=b.getFloat64(o);return o+=8,e}if(t>1){if(b.getUint32(o)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");e=b.getUint32(o+4)}else w.int64AsNumber?(e=4294967296*b.getUint32(o),e+=b.getUint32(o+4)):e=b.getBigUint64(o);o+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e,r=[],n=0;for(;(e=U())!=l;)r[n++]=e;return 4==t?r:3==t?r.join(""):Buffer.concat(r);case 5:let i;if(w.mapsAsObjects){let e={};if(w.keyMap)for(;(i=U())!=l;)e[_(w.decodeKey(i))]=U();else for(;(i=U())!=l;)e[_(i)]=U();return e}{v&&(w.mapsAsObjects=!0,v=!1);let e=new Map;if(w.keyMap)for(;(i=U())!=l;)e.set(w.decodeKey(i),U());else for(;(i=U())!=l;)e.set(i,U());return e}case 7:return l;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+e)}switch(t){case 0:return e;case 1:return~e;case 2:return r=e,w.copyBuffers?Uint8Array.prototype.slice.call(n,o,o+=r):n.subarray(o,o+=r);case 3:if(k>=o)return y.slice(o-S,(o+=e)-S);if(0==k&&i<140&&e<32){let t=e<16?R(e):function(e){let t=o,r=new Array(e);for(let i=0;i<e;i++){const e=n[o++];if((128&e)>0)return void(o=t);r[i]=e}return V.apply(String,r)}(e);if(null!=t)return t}return D(e);case 4:let t=new Array(e);for(let r=0;r<e;r++)t[r]=U();return t;case 5:if(w.mapsAsObjects){let t={};if(w.keyMap)for(let r=0;r<e;r++)t[_(w.decodeKey(U()))]=U();else for(let r=0;r<e;r++)t[_(U())]=U();return t}{v&&(w.mapsAsObjects=!0,v=!1);let t=new Map;if(w.keyMap)for(let r=0;r<e;r++)t.set(w.decodeKey(U()),U());else for(let r=0;r<e;r++)t.set(U(),U());return t}case 6:if(e>=c){let t=f[8191&e];if(t)return t.read||(t.read=x(t)),t.read();if(e<65536){if(e==s){let e=Z(),t=U(),r=U();L(t,r);let n={};if(w.keyMap)for(let t=2;t<e;t++)n[_(w.decodeKey(r[t-2]))]=U();else for(let t=2;t<e;t++)n[_(r[t-2])]=U();return n}if(e==u){let e=Z(),t=U();for(let r=2;r<e;r++)L(t++,U());return U()}if(e==c)return function(){let e=Z(),t=o+U();for(let t=2;t<e;t++){let e=Z();o+=e}let r=o;return o=t,d=[T(Z()),T(Z())],d.position0=0,d.position1=0,d.postBundlePosition=o,o=r,U()}();if(w.getShared&&(G(),t=f[8191&e],t))return t.read||(t.read=x(t)),t.read()}}let a=A[e];if(a)return a.handlesRead?a(U):a(U());{let t=U();for(let r=0;r<O.length;r++){let n=O[r](e,t);if(void 0!==n)return n}return new N(t,e)}case 7:switch(e){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let t=(p||q())[e];if(void 0!==t)return t;throw new Error("Unknown token "+e)}default:if(isNaN(e)){let e=new Error("Unexpected end of CBOR data");throw e.incomplete=!0,e}throw new Error("Unknown CBOR token "+e)}var r}const M=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function x(e){return e.slowReads=0,function(){let e=n[o++];if(e&=31,e>23)switch(e){case 24:e=n[o++];break;case 25:e=b.getUint16(o),o+=2;break;case 26:e=b.getUint32(o),o+=4;break;default:throw new Error("Expected array header, but got "+n[o-1])}let t=this.compiledReader;for(;t;){if(t.propertyCount===e)return t(U);t=t.next}if(this.slowReads++>=B){let r=this.length==e?this:this.slice(0,e);return t=w.keyMap?new Function("r","return {"+r.map((e=>w.decodeKey(e))).map((e=>M.test(e)?_(e)+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}"):new Function("r","return {"+r.map((e=>M.test(e)?_(e)+":r()":"["+JSON.stringify(e)+"]:r()")).join(",")+"}"),this.compiledReader&&(t.next=this.compiledReader),t.propertyCount=e,this.compiledReader=t,t(U)}let r={};if(w.keyMap)for(let t=0;t<e;t++)r[_(w.decodeKey(this[t]))]=U();else for(let t=0;t<e;t++)r[_(this[t])]=U();return r}}function _(e){return"__proto__"===e?"__proto_":e}let D=T;function T(e){let t;if(e<16&&(t=R(e)))return t;if(e>64&&r)return r.decode(n.subarray(o,o+=e));const i=o+e,a=[];for(t="";o<i;){const e=n[o++];if(0==(128&e))a.push(e);else if(192==(224&e)){const t=63&n[o++];a.push((31&e)<<6|t)}else if(224==(240&e)){const t=63&n[o++],r=63&n[o++];a.push((31&e)<<12|t<<6|r)}else if(240==(248&e)){let t=(7&e)<<18|(63&n[o++])<<12|(63&n[o++])<<6|63&n[o++];t>65535&&(t-=65536,a.push(t>>>10&1023|55296),t=56320|1023&t),a.push(t)}else a.push(e);a.length>=4096&&(t+=V.apply(String,a),a.length=0)}return a.length>0&&(t+=V.apply(String,a)),t}let V=String.fromCharCode;function R(e){if(e<4){if(e<2){if(0===e)return"";{let e=n[o++];return(128&e)>1?void(o-=1):V(e)}}{let t=n[o++],r=n[o++];if((128&t)>0||(128&r)>0)return void(o-=2);if(e<3)return V(t,r);let i=n[o++];return(128&i)>0?void(o-=3):V(t,r,i)}}{let t=n[o++],r=n[o++],i=n[o++],a=n[o++];if((128&t)>0||(128&r)>0||(128&i)>0||(128&a)>0)return void(o-=4);if(e<6){if(4===e)return V(t,r,i,a);{let e=n[o++];return(128&e)>0?void(o-=5):V(t,r,i,a,e)}}if(e<8){let u=n[o++],s=n[o++];if((128&u)>0||(128&s)>0)return void(o-=6);if(e<7)return V(t,r,i,a,u,s);let c=n[o++];return(128&c)>0?void(o-=7):V(t,r,i,a,u,s,c)}{let u=n[o++],s=n[o++],c=n[o++],l=n[o++];if((128&u)>0||(128&s)>0||(128&c)>0||(128&l)>0)return void(o-=8);if(e<10){if(8===e)return V(t,r,i,a,u,s,c,l);{let e=n[o++];return(128&e)>0?void(o-=9):V(t,r,i,a,u,s,c,l,e)}}if(e<12){let f=n[o++],y=n[o++];if((128&f)>0||(128&y)>0)return void(o-=10);if(e<11)return V(t,r,i,a,u,s,c,l,f,y);let d=n[o++];return(128&d)>0?void(o-=11):V(t,r,i,a,u,s,c,l,f,y,d)}{let f=n[o++],y=n[o++],d=n[o++],h=n[o++];if((128&f)>0||(128&y)>0||(128&d)>0||(128&h)>0)return void(o-=12);if(e<14){if(12===e)return V(t,r,i,a,u,s,c,l,f,y,d,h);{let e=n[o++];return(128&e)>0?void(o-=13):V(t,r,i,a,u,s,c,l,f,y,d,h,e)}}{let p=n[o++],b=n[o++];if((128&p)>0||(128&b)>0)return void(o-=14);if(e<15)return V(t,r,i,a,u,s,c,l,f,y,d,h,p,b);let v=n[o++];return(128&v)>0?void(o-=15):V(t,r,i,a,u,s,c,l,f,y,d,h,p,b,v)}}}}}let F=new Float32Array(1),C=new Uint8Array(F.buffer,0,4);new Array(4096);class N{constructor(e,t){this.value=e,this.tag=t}}A[0]=e=>new Date(e),A[1]=e=>new Date(Math.round(1e3*e)),A[2]=e=>{let t=BigInt(0);for(let r=0,n=e.byteLength;r<n;r++)t=BigInt(e[r])+t<<BigInt(8);return t},A[3]=e=>BigInt(-1)-A[2](e),A[4]=e=>+(e[1]+"e"+e[0]),A[5]=e=>e[1]*Math.exp(e[0]*Math.log(2));const L=(e,t)=>{let r=f[e-=57344];r&&r.isShared&&((f.restoreStructures||(f.restoreStructures=[]))[e]=r),f[e]=t,t.read=x(t)};A[105]=e=>{let t=e.length,r=e[1];L(e[0],r);let n={};for(let i=2;i<t;i++)n[_(r[i-2])]=e[i];return n},A[14]=e=>d?d[0].slice(d.position0,d.position0+=e):new N(e,14),A[15]=e=>d?d[1].slice(d.position1,d.position1+=e):new N(e,15);let K={Error,RegExp};A[27]=e=>(K[e[0]]||Error)(e[1],e[2]);const z=e=>{if(132!=n[o++]){let e=new Error("Packed values structure must be followed by a 4 element array");throw n.length<o&&(e.incomplete=!0),e}let t=e();if(!t||!t.length){let e=new Error("Packed values structure must be followed by a 4 element array");throw e.incomplete=!0,e}return p=p?t.concat(p.slice(t.length)):t,p.prefixes=e(),p.suffixes=e(),e()};function W(e,t){return"string"==typeof e?e+t:e instanceof Array?e.concat(t):Object.assign({},e,t)}function q(){if(!p){if(!w.getShared)throw new Error("No packed values available");G()}return p}z.handlesRead=!0,A[51]=z,A[6]=e=>{if(!p){if(!w.getShared)return new N(e,6);G()}if("number"==typeof e)return p[16+(e>=0?2*e:-2*e-1)];let t=new Error("No support for non-integer packed references yet");throw void 0===e&&(t.incomplete=!0),t},A[28]=e=>{h||(h=new Map,h.id=0);let t,r=h.id++;t=n[o]>>5==4?[]:{};let i={target:t};h.set(r,i);let a=e();return i.used?Object.assign(t,a):(i.target=a,a)},A[28].handlesRead=!0,A[29]=e=>{let t=h.get(e);return t.used=!0,t.target},A[258]=e=>new Set(e),(A[259]=e=>(w.mapsAsObjects&&(w.mapsAsObjects=!1,v=!0),e())).handlesRead=!0,O.push(((e,t)=>e>=225&&e<=255?W(q().prefixes[e-224],t):e>=28704&&e<=32767?W(q().prefixes[e-28672],t):e>=1879052288&&e<=2147483647?W(q().prefixes[e-1879048192],t):e>=216&&e<=223?W(t,q().suffixes[e-216]):e>=27647&&e<=28671?W(t,q().suffixes[e-27639]):e>=1811940352&&e<=1879048191?W(t,q().suffixes[e-1811939328]):1399353956==e?{packedValues:p,structures:f.slice(0),version:t}:55799==e?t:void 0));const $=1==new Uint8Array(new Uint16Array([1]).buffer)[0],J=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],H=[64,68,69,70,71,72,77,78,79,85,86];for(let e=0;e<J.length;e++)Y(J[e],H[e]);function Y(e,t){let r,n="get"+e.name.slice(0,-5);"function"==typeof e?r=e.BYTES_PER_ELEMENT:e=null;for(let i=0;i<2;i++){if(!i&&1==r)continue;let o=2==r?1:4==r?2:3;A[i?t:t-4]=1==r||i==$?n=>{if(!e)throw new Error("Could not find typed array for code "+t);return w.copyBuffers||1!==r&&(2!==r||1&n.byteOffset)&&(4!==r||3&n.byteOffset)&&(8!==r||7&n.byteOffset)?new e(Uint8Array.prototype.slice.call(n,0).buffer):new e(n.buffer,n.byteOffset,n.byteLength)}:r=>{if(!e)throw new Error("Could not find typed array for code "+t);let a=new DataView(r.buffer,r.byteOffset,r.byteLength),u=r.length>>o,s=new e(u),c=a[n];for(let e=0;e<u;e++)s[e]=c.call(a,e<<o,i);return s}}}function Z(){let e=31&n[o++];if(e>23)switch(e){case 24:e=n[o++];break;case 25:e=b.getUint16(o),o+=2;break;case 26:e=b.getUint32(o),o+=4}return e}function G(){if(w.getShared){let e=Q((()=>(n=null,w.getShared())))||{},t=e.structures||[];w.sharedVersion=e.version,p=w.sharedValues=e.packedValues,!0===f?w.structures=f=t:f.splice.apply(f,[0,t.length].concat(t))}}function Q(e){let t=i,r=o,a=m,u=S,s=k,c=y,l=g,p=h,v=d,A=new Uint8Array(n.slice(0,i)),O=f,j=w,B=I,E=e();return i=t,o=r,m=a,S=u,k=s,y=c,g=l,h=p,d=v,n=A,I=B,f=O,w=j,b=new DataView(n.buffer,n.byteOffset,n.byteLength),E}function X(){n=null,h=null,f=null}const ee=new Array(147);for(let e=0;e<256;e++)ee[e]=+("1e"+Math.floor(45.15-.30103*e));let te=new E({useRecords:!1});const re=te.decode;let ne,ie,oe;te.decodeMultiple;try{ne=new TextEncoder}catch(e){}const ae="object"==typeof globalThis&&globalThis.Buffer,ue=void 0!==ae,se=ue?ae.allocUnsafeSlow:Uint8Array,ce=ue?ae:Uint8Array,le=ue?4294967296:2144337920;let fe,ye,de,he,pe=0,be=null;const ve=/[\u0080-\uFFFF]/,ge=Symbol("record-id");function me(e,t){e<24?ye[pe++]=t|e:e<256?(ye[pe++]=24|t,ye[pe++]=e):e<65536?(ye[pe++]=25|t,ye[pe++]=e>>8,ye[pe++]=255&e):(ye[pe++]=26|t,de.setUint32(pe,e),pe+=4)}class we{constructor(e,t,r){this.structures=e,this.packedValues=t,this.version=r}}function Se(e){e<24?ye[pe++]=128|e:e<256?(ye[pe++]=152,ye[pe++]=e):e<65536?(ye[pe++]=153,ye[pe++]=e>>8,ye[pe++]=255&e):(ye[pe++]=154,de.setUint32(pe,e),pe+=4)}const ke="undefined"==typeof Blob?function(){}:Blob;function Ae(e){if(e instanceof ke)return!0;let t=e[Symbol.toStringTag];return"Blob"===t||"File"===t}function Oe(e,t){switch(typeof e){case"string":if(e.length>3){if(t.objectMap[e]>-1||t.values.length>=t.maxValues)return;let r=t.get(e);if(r)2==++r.count&&t.values.push(e);else if(t.set(e,{count:1}),t.samplingPackedValues){let r=t.samplingPackedValues.get(e);r?r.count++:t.samplingPackedValues.set(e,{count:1})}}break;case"object":if(e)if(e instanceof Array)for(let r=0,n=e.length;r<n;r++)Oe(e[r],t);else{let n=!t.encoder.useRecords;for(var r in e)e.hasOwnProperty(r)&&(n&&Oe(r,t),Oe(e[r],t))}break;case"function":console.log(e)}}const je=1==new Uint8Array(new Uint16Array([1]).buffer)[0];function Ie(e,t){return!je&&t>1&&(e-=4),{tag:e,encode:function(e,t){let r=e.byteLength,n=e.byteOffset||0,i=e.buffer||e;t(ue?ae.from(i,n,r):new Uint8Array(i,n,r))}}}function Be(e,t){let r=e.byteLength;r<24?ye[pe++]=64+r:r<256?(ye[pe++]=88,ye[pe++]=r):r<65536?(ye[pe++]=89,ye[pe++]=r>>8,ye[pe++]=255&r):(ye[pe++]=90,de.setUint32(pe,r),pe+=4),pe+r>=ye.length&&t(pe+r),ye.set(e.buffer?e:new Uint8Array(e),pe),pe+=r}function Ee(e,t){de.setUint32(be.position+e,pe-be.position-e+1);let r=be;be=null,t(r[0]),t(r[1])}oe=[Date,Set,Error,RegExp,N,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,"undefined"==typeof BigUint64Array?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,"undefined"==typeof BigInt64Array?function(){}:BigInt64Array,Float32Array,Float64Array,we],ie=[{tag:1,encode(e,t){let r=e.getTime()/1e3;(this.useTimestamp32||0===e.getMilliseconds())&&r>=0&&r<4294967296?(ye[pe++]=26,de.setUint32(pe,r),pe+=4):(ye[pe++]=251,de.setFloat64(pe,r),pe+=8)}},{tag:258,encode(e,t){t(Array.from(e))}},{tag:27,encode(e,t){t([e.name,e.message])}},{tag:27,encode(e,t){t(["RegExp",e.source,e.flags])}},{getTag:e=>e.tag,encode(e,t){t(e.value)}},{encode(e,t,r){Be(e,r)}},{getTag(e){if(e.constructor===Uint8Array&&(this.tagUint8Array||ue&&!1!==this.tagUint8Array))return 64},encode(e,t,r){Be(e,r)}},Ie(68,1),Ie(69,2),Ie(70,4),Ie(71,8),Ie(72,1),Ie(77,2),Ie(78,4),Ie(79,8),Ie(85,4),Ie(86,8),{encode(e,t){let r=e.packedValues||[],n=e.structures||[];if(r.values.length>0){ye[pe++]=216,ye[pe++]=51,Se(4);let e=r.values;t(e),Se(0),Se(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let t=0,r=e.length;t<r;t++)packedObjectMap[e[t]]=t}if(n){de.setUint32(pe,3655335424),pe+=3;let r=n.slice(0);r.unshift(57344),r.push(new N(e.version,1399353956)),t(r)}else t(new N(e.version,1399353956))}}];let Pe=new class extends E{constructor(e){let t,r,n,i,o;super(e),this.offset=0,e=e||{};let a=ce.prototype.utf8Write?function(e,t,r){return ye.utf8Write(e,t,r)}:!(!ne||!ne.encodeInto)&&function(e,t){return ne.encodeInto(e,ye.subarray(t)).written},u=this,s=e.structures||e.saveStructures,c=e.maxSharedStructures;if(null==c&&(c=s?128:0),c>8190)throw new Error("Maximum maxSharedStructure is 8190");let l=e.sequential;l&&(c=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let f,y,d,h=e.sharedValues;if(h){d=Object.create(null);for(let e=0,t=h.length;e<t;e++)d[h[e]]=e}let p=[],b=0,v=0;this.mapEncode=function(e,t){return this._keyMap&&!this._mapped&&"Array"===e.constructor.name&&(e=e.map((e=>this.encodeKeys(e)))),this.encode(e,t)},this.encode=function(a,s){if(ye||(ye=new se(8192),de=new DataView(ye.buffer,0,8192),pe=0),he=ye.length-10,he-pe<2048?(ye=new se(ye.length),de=new DataView(ye.buffer,0,ye.length),he=ye.length-10,pe=0):s===De&&(pe=pe+7&2147483640),t=pe,u.useSelfDescribedHeader&&(de.setUint32(pe,3654940416),pe+=3),o=u.structuredClone?new Map:null,u.bundleStrings&&"string"!=typeof a?(be=[],be.size=1/0):be=null,r=u.structures,r){if(r.uninitialized){let e=u.getShared()||{};u.structures=r=e.structures||[],u.sharedVersion=e.version;let t=u.sharedValues=e.packedValues;if(t){d={};for(let e=0,r=t.length;e<r;e++)d[t[e]]=e}}let e=r.length;if(e>c&&!l&&(e=c),!r.transitions){r.transitions=Object.create(null);for(let t=0;t<e;t++){let e=r[t];if(!e)continue;let n,i=r.transitions;for(let r=0,o=e.length;r<o;r++){void 0===i[ge]&&(i[ge]=t);let o=e[r];n=i[o],n||(n=i[o]=Object.create(null)),i=n}i[ge]=1048576|t}}l||(r.nextId=e)}if(n&&(n=!1),i=r||[],y=d,e.pack){let t=new Map;if(t.values=[],t.encoder=u,t.maxValues=e.maxPrivatePackedValues||(d?16:1/0),t.objectMap=d||!1,t.samplingPackedValues=f,Oe(a,t),t.values.length>0){ye[pe++]=216,ye[pe++]=51,Se(4);let e=t.values;g(e),Se(0),Se(0),y=Object.create(d||null);for(let t=0,r=e.length;t<r;t++)y[e[t]]=t}}fe=s&Ve;try{if(fe)return;if(g(a),be&&Ee(t,g),u.offset=pe,o&&o.idsToInsert){pe+=2*o.idsToInsert.length,pe>he&&w(pe),u.offset=pe;let e=function(e,t){let r,n=2*t.length,i=e.length-n;t.sort(((e,t)=>e.offset>t.offset?1:-1));for(let r=0;r<t.length;r++){let n=t[r];n.id=r;for(let t of n.references)e[t++]=r>>8,e[t]=255&r}for(;r=t.pop();){let t=r.offset;e.copyWithin(t+n,t,i),n-=2;let o=t+n;e[o++]=216,e[o++]=28,i=t}return e}(ye.subarray(t,pe),o.idsToInsert);return o=null,e}return s&De?(ye.start=t,ye.end=pe,ye):ye.subarray(t,pe)}finally{if(r)if(v<10&&v++,r.length>c&&(r.length=c),b>1e4)r.transitions=null,v=0,b=0,p.length>0&&(p=[]);else if(p.length>0&&!l){for(let e=0,t=p.length;e<t;e++)p[e][ge]=void 0;p=[]}if(n&&u.saveShared){u.structures.length>c&&(u.structures=u.structures.slice(0,c));let e=ye.subarray(t,pe);return!1===u.updateSharedData()?u.encode(a):e}s&Te&&(pe=t)}},this.findCommonStringsToPack=()=>(f=new Map,d||(d=Object.create(null)),e=>{let t=e&&e.threshold||4,r=this.pack?e.maxPrivatePackedValues||16:0;h||(h=this.sharedValues=[]);for(let[e,i]of f)i.count>t&&(d[e]=r++,h.push(e),n=!0);for(;this.saveShared&&!1===this.updateSharedData(););f=null});const g=r=>{pe>he&&(ye=w(pe));var n,i=typeof r;if("string"===i){if(y){let t=y[r];if(t>=0)return void(t<16?ye[pe++]=t+224:(ye[pe++]=198,g(1&t?15-t>>1:t-16>>1)));if(f&&!e.pack){let e=f.get(r);e?e.count++:f.set(r,{count:1})}}let i,o=r.length;if(be&&o>=4&&o<1024){if((be.size+=o)>61440){let e,r=(be[0]?3*be[0].length+be[1].length:0)+10;pe+r>he&&(ye=w(pe+r)),ye[pe++]=217,ye[pe++]=223,ye[pe++]=249,ye[pe++]=be.position?132:130,ye[pe++]=26,e=pe-t,pe+=4,be.position&&Ee(t,g),be=["",""],be.size=0,be.position=e}let e=ve.test(r);return be[e?0:1]+=r,ye[pe++]=e?206:207,void g(o)}i=o<32?1:o<256?2:o<65536?3:5;let u=3*o;if(pe+u>he&&(ye=w(pe+u)),o<64||!a){let e,t,a,u=pe+i;for(e=0;e<o;e++)t=r.charCodeAt(e),t<128?ye[u++]=t:t<2048?(ye[u++]=t>>6|192,ye[u++]=63&t|128):55296==(64512&t)&&56320==(64512&(a=r.charCodeAt(e+1)))?(t=65536+((1023&t)<<10)+(1023&a),e++,ye[u++]=t>>18|240,ye[u++]=t>>12&63|128,ye[u++]=t>>6&63|128,ye[u++]=63&t|128):(ye[u++]=t>>12|224,ye[u++]=t>>6&63|128,ye[u++]=63&t|128);n=u-pe-i}else n=a(r,pe+i,u);n<24?ye[pe++]=96|n:n<256?(i<2&&ye.copyWithin(pe+2,pe+1,pe+1+n),ye[pe++]=120,ye[pe++]=n):n<65536?(i<3&&ye.copyWithin(pe+3,pe+2,pe+2+n),ye[pe++]=121,ye[pe++]=n>>8,ye[pe++]=255&n):(i<5&&ye.copyWithin(pe+5,pe+3,pe+3+n),ye[pe++]=122,de.setUint32(pe,n),pe+=4),pe+=n}else if("number"===i)if(this.alwaysUseFloat||r>>>0!==r)if(this.alwaysUseFloat||r>>0!==r){let e;if((e=this.useFloat32)>0&&r<4294967296&&r>=-2147483648){let t;if(ye[pe++]=250,de.setFloat32(pe,r),e<4||(t=r*ee[(127&ye[pe])<<1|ye[pe+1]>>7])>>0===t)return void(pe+=4);pe--}ye[pe++]=251,de.setFloat64(pe,r),pe+=8}else r>=-24?ye[pe++]=31-r:r>=-256?(ye[pe++]=56,ye[pe++]=~r):r>=-65536?(ye[pe++]=57,de.setUint16(pe,~r),pe+=2):(ye[pe++]=58,de.setUint32(pe,~r),pe+=4);else r<24?ye[pe++]=r:r<256?(ye[pe++]=24,ye[pe++]=r):r<65536?(ye[pe++]=25,ye[pe++]=r>>8,ye[pe++]=255&r):(ye[pe++]=26,de.setUint32(pe,r),pe+=4);else if("object"===i)if(r){if(o){let e=o.get(r);if(e){if(ye[pe++]=216,ye[pe++]=29,ye[pe++]=25,!e.references){let t=o.idsToInsert||(o.idsToInsert=[]);e.references=[],t.push(e)}return e.references.push(pe-t),void(pe+=2)}o.set(r,{offset:pe-t})}let e=r.constructor;if(e===Object)m(r,!0);else if(e===Array){(n=r.length)<24?ye[pe++]=128|n:Se(n);for(let e=0;e<n;e++)g(r[e])}else if(e===Map)if((this.mapsAsObjects?!1!==this.useTag259ForMaps:this.useTag259ForMaps)&&(ye[pe++]=217,ye[pe++]=1,ye[pe++]=3),(n=r.size)<24?ye[pe++]=160|n:n<256?(ye[pe++]=184,ye[pe++]=n):n<65536?(ye[pe++]=185,ye[pe++]=n>>8,ye[pe++]=255&n):(ye[pe++]=186,de.setUint32(pe,n),pe+=4),u.keyMap)for(let[e,t]of r)g(u.encodeKey(e)),g(t);else for(let[e,t]of r)g(e),g(t);else{for(let e=0,t=ie.length;e<t;e++)if(r instanceof oe[e]){let t=ie[e],n=t.tag;return null==n&&(n=t.getTag&&t.getTag.call(this,r)),n<24?ye[pe++]=192|n:n<256?(ye[pe++]=216,ye[pe++]=n):n<65536?(ye[pe++]=217,ye[pe++]=n>>8,ye[pe++]=255&n):n>-1&&(ye[pe++]=218,de.setUint32(pe,n),pe+=4),void t.encode.call(this,r,g,w)}if(r[Symbol.iterator]){if(fe){let e=new Error("Iterable should be serialized as iterator");throw e.iteratorNotHandled=!0,e}ye[pe++]=159;for(let e of r)g(e);return void(ye[pe++]=255)}if(r[Symbol.asyncIterator]||Ae(r)){let e=new Error("Iterable/blob should be serialized as iterator");throw e.iteratorNotHandled=!0,e}if(this.useToJSON&&r.toJSON){const e=r.toJSON();if(e!==r)return g(e)}m(r,!r.hasOwnProperty)}}else ye[pe++]=246;else if("boolean"===i)ye[pe++]=r?245:244;else if("bigint"===i){if(r<BigInt(1)<<BigInt(64)&&r>=0)ye[pe++]=27,de.setBigUint64(pe,r);else if(r>-(BigInt(1)<<BigInt(64))&&r<0)ye[pe++]=59,de.setBigUint64(pe,-r-BigInt(1));else{if(!this.largeBigIntToFloat)throw new RangeError(r+" was too large to fit in CBOR 64-bit integer format, set largeBigIntToFloat to convert to float-64");ye[pe++]=251,de.setFloat64(pe,Number(r))}pe+=8}else{if("undefined"!==i)throw new Error("Unknown type: "+i);ye[pe++]=247}},m=!1===this.useRecords?this.variableMapSize?e=>{let t=Object.keys(e),r=Object.values(e),n=t.length;if(n<24?ye[pe++]=160|n:n<256?(ye[pe++]=184,ye[pe++]=n):n<65536?(ye[pe++]=185,ye[pe++]=n>>8,ye[pe++]=255&n):(ye[pe++]=186,de.setUint32(pe,n),pe+=4),u.keyMap)for(let e=0;e<n;e++)g(u.encodeKey(t[e])),g(r[e]);else for(let e=0;e<n;e++)g(t[e]),g(r[e])}:(e,r)=>{ye[pe++]=185;let n=pe-t;pe+=2;let i=0;if(u.keyMap)for(let t in e)(r||e.hasOwnProperty(t))&&(g(u.encodeKey(t)),g(e[t]),i++);else for(let t in e)(r||e.hasOwnProperty(t))&&(g(t),g(e[t]),i++);ye[n+++t]=i>>8,ye[n+t]=255&i}:(e,t)=>{let r,o,a,u=i.transitions||(i.transitions=Object.create(null)),s=0,l=0;if(this.keyMap){a=Object.keys(e).map((e=>this.encodeKey(e))),l=a.length;for(let e=0;e<l;e++){let t=a[e];r=u[t],r||(r=u[t]=Object.create(null),s++),u=r}}else for(let n in e)(t||e.hasOwnProperty(n))&&(r=u[n],r||(1048576&u[ge]&&(o=65535&u[ge]),r=u[n]=Object.create(null),s++),u=r,l++);let f=u[ge];if(void 0!==f)f&=65535,ye[pe++]=217,ye[pe++]=f>>8|224,ye[pe++]=255&f;else{if(a||(a=u.__keys__||(u.__keys__=Object.keys(e))),void 0===o?(f=i.nextId++,f||(f=0,i.nextId=1),f>=256&&(i.nextId=(f=c)+1)):f=o,i[f]=a,!(f<c)){if(u[ge]=f,de.setUint32(pe,3655335680),pe+=3,s&&(b+=v*s),p.length>=256-c&&(p.shift()[ge]=void 0),p.push(u),Se(l+2),g(57344+f),g(a),null===t)return;for(let r in e)(t||e.hasOwnProperty(r))&&g(e[r]);return}ye[pe++]=217,ye[pe++]=f>>8|224,ye[pe++]=255&f,u=i.transitions;for(let e=0;e<l;e++)(void 0===u[ge]||1048576&u[ge])&&(u[ge]=f),u=u[a[e]];u[ge]=1048576|f,n=!0}if(l<24?ye[pe++]=128|l:Se(l),null!==t)for(let r in e)(t||e.hasOwnProperty(r))&&g(e[r])},w=e=>{let r;if(e>16777216){if(e-t>le)throw new Error("Encoded buffer would be larger than maximum buffer size");r=Math.min(le,4096*Math.round(Math.max((e-t)*(e>67108864?1.25:2),4194304)/4096))}else r=1+(Math.max(e-t<<2,ye.length-1)>>12)<<12;let n=new se(r);return de=new DataView(n.buffer,0,r),ye.copy?ye.copy(n,0,t,e):n.set(ye.slice(t,e)),pe-=t,t=0,he=n.length-10,ye=n};let S=100,k=1e3;function*A(e,r,n){let i=e.constructor;if(i===Object){let t=!1!==u.useRecords;t?m(e,null):me(Object.keys(e).length,160);for(let n in e){let i=e[n];t||g(n),i&&"object"==typeof i?r[n]?yield*A(i,r[n]):yield*O(i,r,n):g(i)}}else if(i===Array){let n=e.length;Se(n);for(let i=0;i<n;i++){let n=e[i];n&&("object"==typeof n||pe-t>S)?r.element?yield*A(n,r.element):yield*O(n,r,"element"):g(n)}}else if(e[Symbol.iterator]){ye[pe++]=159;for(let n of e)n&&("object"==typeof n||pe-t>S)?r.element?yield*A(n,r.element):yield*O(n,r,"element"):g(n);ye[pe++]=255}else Ae(e)?(me(e.size,64),yield ye.subarray(t,pe),yield e,j()):e[Symbol.asyncIterator]?(ye[pe++]=159,yield ye.subarray(t,pe),yield e,j(),ye[pe++]=255):g(e);n&&pe>t?yield ye.subarray(t,pe):pe-t>S&&(yield ye.subarray(t,pe),j())}function*O(e,r,n){let i=pe-t;try{g(e),pe-t>S&&(yield ye.subarray(t,pe),j())}catch(o){if(!o.iteratorNotHandled)throw o;r[n]={},pe=t+i,yield*A.call(this,e,r[n])}}function j(){S=k,u.encode(null,Ve)}function I(e,t,r){return S=t&&t.chunkThreshold?k=t.chunkThreshold:100,e&&"object"==typeof e?(u.encode(null,Ve),r(e,u.iterateProperties||(u.iterateProperties={}),!0)):[u.encode(e)]}async function*B(e,t){for(let r of A(e,t,!0)){let e=r.constructor;if(e===ce||e===Uint8Array)yield r;else if(Ae(r)){let e,t=r.stream().getReader();for(;!(e=await t.read()).done;)yield e.value}else if(r[Symbol.asyncIterator])for await(let e of r)j(),e?yield*B(e,t.async||(t.async={})):yield u.encode(e);else yield r}}this.encodeAsIterable=function(e,t){return I(e,t,A)},this.encodeAsAsyncIterable=function(e,t){return I(e,t,B)}}useBuffer(e){ye=e,de=new DataView(ye.buffer,ye.byteOffset,ye.byteLength),pe=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let e=this.sharedVersion||0;this.sharedVersion=e+1;let t=this.structures.slice(0),r=new we(t,this.sharedValues,this.sharedVersion),n=this.saveShared(r,(t=>(t&&t.version||0)==e));return!1===n?(r=this.getShared()||{},this.structures=r.structures||[],this.sharedValues=r.packedValues,this.sharedVersion=r.version,this.structures.nextId=this.structures.length):t.forEach(((e,t)=>this.structures[t]=e)),n}}({useRecords:!1});Pe.encode,Pe.encodeAsIterable,Pe.encodeAsAsyncIterable;const{NEVER:Ue,ALWAYS:Me,DECIMAL_ROUND:xe,DECIMAL_FIT:_e}={NEVER:0,ALWAYS:1,DECIMAL_ROUND:3,DECIMAL_FIT:4},De=512,Te=1024,Ve=2048;function Re(e){return Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Re(e)}function Fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ce(e,t)}function Ce(e,t){return Ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ce(e,t)}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Le(e);if(t){var i=Le(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Le(e){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Le(e)}function Ke(e,t,r){return(t=qe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,qe(n.key),n)}}function We(e,t,r){return t&&ze(e.prototype,t),r&&ze(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function qe(e){var t=function(e,t){if("object"!=Re(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Re(t)?t:String(t)}function $e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Je=We((function e(){$e(this,e)})),He=We((function e(t){$e(this,e),this.n=t})),Ye=function(e){Fe(r,e);var t=Ne(r);function r(){return $e(this,r),t.apply(this,arguments)}return We(r,[{key:"decode",value:function(e){for(var t=e.bits8(8),r=BigInt(0),n=0;0!=(128&t);)r|=BigInt(127&t)<<BigInt(n),n+=7,t=e.bits8(8);return r|=BigInt(127&t)<<BigInt(n),new He(r)}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);Ke(Ye,"instance",new Ye);var Ze=function(e){Fe(r,e);var t=Ne(r);function r(){return $e(this,r),t.apply(this,arguments)}return We(r,[{key:"decode",value:function(e){for(var t=e.bits8(8),r=BigInt(0),n=0;0!=(128&t);)r|=BigInt(127&t)<<BigInt(n),n+=7,t=e.bits8(8);return r|=BigInt(127&t)<<BigInt(n),rt(r)}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);Ke(Ze,"instance",new Ze);var Ge=function(e){Fe(r,e);var t=Ne(r);function r(){return $e(this,r),t.apply(this,arguments)}return We(r,[{key:"decode",value:function(e){e.filler();for(var t=255&e.buffer[e.currPtr],r=t+1,n=t;255===t;)n+=t=255&e.buffer[e.currPtr+r],r+=t+1;var i=new Int8Array(n);t=255&e.buffer[e.currPtr],e.currPtr+=1;for(var o=0;t>0;)i.set(e.buffer.subarray(e.currPtr,e.currPtr+t),o),e.currPtr+=t,o+=t,t=255&e.buffer[e.currPtr],e.currPtr+=1;return i}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);Ke(Ge,"instance",new Ge);var Qe=function(e){Fe(r,e);var t=Ne(r);function r(){return $e(this,r),t.apply(this,arguments)}return We(r,[{key:"decode",value:function(e){var t=Ge.getInstance().decode(e);return new TextDecoder("UTF-8").decode(t)}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);Ke(Qe,"instance",new Qe);var Xe=function(e){Fe(r,e);var t=Ne(r);function r(){return $e(this,r),t.apply(this,arguments)}return We(r,[{key:"decode",value:function(e){return 1===e.bits8(1)}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);Ke(Xe,"instance",new Xe);var et=function(e){Fe(r,e);var t=Ne(r);function r(){return $e(this,r),t.apply(this,arguments)}return We(r,[{key:"decode",value:function(e){return e?"()":""}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);Ke(et,"instance",new et);var tt=function(e){Fe(r,e);var t=Ne(r);function r(){return $e(this,r),t.apply(this,arguments)}return We(r,[{key:"decode",value:function(e){return Ge.getInstance().decode(e)}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);Ke(tt,"instance",new tt);var rt=function(e){return e>>BigInt("1")^-(e&BigInt("1"))},nt=function(){function e(t){$e(this,e),Ke(this,"currPtr",0),Ke(this,"usedBits",0),this.buffer=t}return We(e,[{key:"toString",value:function(){return"DecoderState(currPtr:".concat(this.currPtr,", usedBits:").concat(this.usedBits,", buffer:[").concat(Array.from(this.buffer).map((function(e){return e.toString()})).join(", "),"])")}},{key:"bits8",value:function(e){if(e<0||e>8)throw new Error("Decoder.bits8: incorrect value of numBits "+e);this.ensureBits(e);var t=8-this.usedBits,r=8-e,n=(this.buffer[this.currPtr]<<this.usedBits&255)>>>r;return e>t&&(n|=(255&this.buffer[this.currPtr+1])>>>t+r),this.dropBits(e),255&n}},{key:"filler",value:function(){for(;0===this.bits8(1););}},{key:"ensureBits",value:function(e){if(e>this.availableBits())throw new Error("DecoderState: Not enough data available: "+this.toString())}},{key:"availableBits",value:function(){return 8*this.availableBytes()-this.usedBits}},{key:"availableBytes",value:function(){return this.buffer.length-this.currPtr}},{key:"dropBits",value:function(e){var t=e+this.usedBits;this.usedBits=t%8,this.currPtr+=Math.floor(t/8)}}]),e}(),it=function(){function e(t){$e(this,e),this.decoder=t}return We(e,[{key:"decode",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){for(var t=[];1===e.bits8(1);){var r=this.decoder.decode(e);t.push(r)}return t}))}]),e}();function ot(e){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(e)}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ut(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,st(n.key),n)}}function st(e){var t=function(e,t){if("object"!=ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ot(t)?t:String(t)}var ct=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tpe=t,this.value=r}var t,r,n;return t=e,n=[{key:"fromValue",value:function(t,r){return new e(t,r)}}],(r=[{key:"prettyValue",value:function(e){var t=this;return e instanceof Pt?"".concat(this.value):e instanceof Ut?"#".concat(ft(this.value)):e instanceof Mt?'"'.concat(this.value,'"'):e instanceof xt?"".concat(this.value):e instanceof _t?this.value?"True":"False":e instanceof Vt?"[".concat(this.value.map((function(e){return t.prettyValue(e)})).join(", "),"]"):e instanceof Rt?"".concat(this.value):e instanceof Dt?"#".concat(ft(this.value)):""}},{key:"pretty",value:function(){return this.tpe?"".concat(Et.pretty(this.tpe)," ").concat(this.prettyValue(this.tpe)):""}}])&&ut(t.prototype,r),n&&ut(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),lt="0123456789ABCDEF".split(""),ft=function(e){for(var t=new Array(2*e.length),r=0;r<e.length;r++){var n=255&e[r];t[2*r]=lt[n>>>4],t[2*r+1]=lt[15&n]}return t.join("")},yt=function(e){var t,r,n=[],i=0,o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(e=function(e){return e.replace(/\(\s+|\s+\)/g,(function(e){return e.trim()})).replace(/(\w+)\s+(\w+)/g,"$1 $2")}(function(e){return e.replace(/[\[\]\n]+/g,(function(e){return"\n"===e?"":"["===e?"(":")"}))}(e)));try{for(o.s();!(r=o.n()).done;){var a=r.value;if("("===a){var u,s={id:i++};t&&(t.data||(t.data=[]),t.data.push(s),t.text=null===(u=t.text)||void 0===u?void 0:u.trim(),t.text||delete t.text,n.push(t)),t=s}else")"===a?n.length>0&&(t=n.pop()):(t||(t={id:i++}),t.text=(t.text||"")+a)}}catch(e){o.e(e)}finally{o.f()}return t||{}};function dt(e){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dt(e)}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ot(n.key),n)}}function gt(e,t,r){return t&&vt(e.prototype,t),r&&vt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function mt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=kt(e);if(t){var i=kt(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kt(e){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kt(e)}function At(e,t,r){return(t=Ot(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ot(e){var t=function(e,t){if("object"!=dt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=dt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==dt(t)?t:String(t)}var jt=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r,[{key:"decode",value:function(e){var t=Ft(new it(Bt.getInstance()).decode(e))[0],r=It(t),n=null==r?void 0:r.decode(e);if(r instanceof it){var i=t;t=new Vt(i.f,i.arg)}return ct.fromValue(t,n)}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);At(jt,"instance",new jt);var It=function e(t){return t instanceof Pt?Ze.getInstance():t instanceof Ut?Ge.getInstance():t instanceof Mt?Qe.getInstance():t instanceof xt?et.getInstance():t instanceof _t?Xe.getInstance():t instanceof Dt?tt.getInstance():t instanceof Tt&&t.f instanceof Vt&&t.arg?new it(e(t.arg)):void(t instanceof Tt&&t.f instanceof Rt&&t.arg)},Bt=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r,[{key:"decode",value:function(e){return e.bits8(4)}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);At(Bt,"instance",new Bt);var Et=function(){function e(){bt(this,e)}return gt(e,null,[{key:"pretty",value:function(e){return e instanceof Pt?"integer":e instanceof Ut?"bytestring":e instanceof Mt?"string":e instanceof xt?"unit":e instanceof _t?"bool":e instanceof Vt?"(list ".concat(e.arg&&this.pretty(e.arg),")"):e instanceof Rt?"(pair)":e instanceof Dt?"data":""}}]),e}(),Pt=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r)}(Et),Ut=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r)}(Et),Mt=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r)}(Et),xt=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r)}(Et),_t=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r)}(Et),Dt=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r)}(Et),Tt=function(e){mt(r,e);var t=St(r);function r(e,n){var i;return bt(this,r),(i=t.call(this)).f=e,i.arg=n,i}return gt(r)}(Et),Vt=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r)}(Tt),Rt=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r)}(Tt);function Ft(e){switch(e[0]){case 0:return[new Pt,e.slice(1)];case 1:return[new Ut,e.slice(1)];case 2:return[new Mt,e.slice(1)];case 3:return[new xt,e.slice(1)];case 4:return[new _t,e.slice(1)];case 5:return[new Vt,e.slice(1)];case 6:return[new Rt,e.slice(1)];case 7:var t=ht(Ft(e.slice(1)),2),r=t[0],n=ht(Ft(t[1]),2),i=n[0],o=n[1];return[new Tt(r,i),o];case 8:return[new Dt,e.slice(1)];default:throw new Error("Invalid uni: ".concat(e[0]))}}var Ct=function(e){mt(r,e);var t=St(r);function r(){return bt(this,r),t.apply(this,arguments)}return gt(r,[{key:"decode",value:function(e){var t=e.bits8(7);switch(t){case 0:return"addInteger";case 1:return"subtractInteger";case 2:return"multiplyInteger";case 3:return"divideInteger";case 4:return"quotientInteger";case 5:return"remainderInteger";case 6:return"modInteger";case 7:return"equalsInteger";case 8:return"lessThanInteger";case 9:return"lessThanEqualsInteger";case 10:return"appendByteString";case 11:return"consByteString";case 12:return"sliceByteString";case 13:return"lengthOfByteString";case 14:return"indexByteString";case 15:return"equalsByteString";case 16:return"lessThanByteString";case 17:return"lessThanEqualsByteString";case 18:return"sha2_256";case 19:return"sha3_256";case 20:return"blake2b_256";case 21:return"verifyEd25519Signature";case 22:return"appendString";case 23:return"equalsString";case 24:return"encodeUtf8";case 25:return"decodeUtf8";case 26:return"ifThenElse";case 27:return"chooseUnit";case 28:return"trace";case 29:return"fstPair";case 30:return"sndPair";case 31:return"chooseList";case 32:return"mkCons";case 33:return"headList";case 34:return"tailList";case 35:return"nullList";case 36:return"chooseData";case 37:return"constrData";case 38:return"mapData";case 39:return"listData";case 40:return"iData";case 41:return"bData";case 42:return"unConstrData";case 43:return"unMapData";case 44:return"unListData";case 45:return"unIData";case 46:return"unBData";case 47:return"equalsData";case 48:return"mkPairData";case 49:return"mkNilData";case 50:return"mkNilPairData";case 51:return"serialiseData";case 52:return"verifyEcdsaSecp256k1Signature";case 53:return"verifySchnorrSecp256k1Signature";default:throw new Error("Invalid builtin function code: ".concat(t))}}}],[{key:"getInstance",value:function(){return r.instance}}]),r}(Je);function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Wt(n.key),n)}}function zt(e,t,r){return t&&Kt(e.prototype,t),r&&Kt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wt(e){var t=function(e,t){if("object"!=Nt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Nt(t)?t:String(t)}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}At(Ct,"instance",new Ct);var $t=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Lt(this,e),r<0)throw new Error("Index must be non-negative.");this.name=t,this.index=r}return zt(e,[{key:"toString",value:function(){return 0===this.index?'NamedDeBruijn("'.concat(this.name,'")'):'NamedDeBruijn("'.concat(this.name,'", ').concat(this.index,")")}}]),e}(),Jt=function(e){return e[e.Var=0]="Var",e[e.LamAbs=1]="LamAbs",e[e.Apply=2]="Apply",e[e.Force=3]="Force",e[e.Delay=4]="Delay",e[e.Const=5]="Const",e[e.Builtin=6]="Builtin",e[e.Error=7]="Error",e}({}),Ht=function(){function e(){Lt(this,e)}return zt(e,[{key:"pretty",value:function(){switch(this.type){case Jt.Var:return this.name?this.name.name:"";case Jt.LamAbs:var e,t;return"  (lam ".concat(null===(e=this.name)||void 0===e?void 0:e.name," ").concat(null===(t=this.term)||void 0===t?void 0:t.pretty(),")");case Jt.Apply:var r,n;return"[ ".concat(null===(r=this.f)||void 0===r?void 0:r.pretty()," ").concat(null===(n=this.arg)||void 0===n?void 0:n.pretty()," ]");case Jt.Force:var i;return"(force ".concat(null===(i=this.term)||void 0===i?void 0:i.pretty(),")");case Jt.Delay:var o;return"(delay ".concat(null===(o=this.term)||void 0===o?void 0:o.pretty(),")");case Jt.Const:var a;return"(con ".concat(null===(a=this.const)||void 0===a?void 0:a.pretty(),")");case Jt.Builtin:return"(builtin ".concat(this.bn,")");case Jt.Error:return"(error)"}}}],[{key:"Var",value:function(t){var r=new e;return r.type=Jt.Var,r.name=t,r}},{key:"LamAbs",value:function(t,r){var n=new e;return n.type=Jt.LamAbs,n.name=new $t(t),n.term=r,n}},{key:"Apply",value:function(t,r){var n=new e;return n.type=Jt.Apply,n.f=t,n.arg=r,n}},{key:"Force",value:function(t){var r=new e;return r.type=Jt.Force,r.term=t,r}},{key:"Delay",value:function(t){var r=new e;return r.type=Jt.Delay,r.term=t,r}},{key:"Const",value:function(t){var r=new e;return r.type=Jt.Const,r.const=t,r}},{key:"Builtin",value:function(t){var r=new e;return r.type=Jt.Builtin,r.bn=t,r}},{key:"Error",value:function(){var t=new e;return t.type=Jt.Error,t}}]),e}(),Yt=function(){function e(t,r){Lt(this,e),this.version=t,this.term=r}return zt(e,[{key:"pretty",value:function(){var e=this.version,t=e.major,r=e.minor,n=e.patch;return"(program\n  ".concat(t,".").concat(r,".").concat(n,"\n").concat(this.term.pretty(),"\n)")}}]),e}(),Zt=function(){function e(){Lt(this,e)}return zt(e,null,[{key:"decode",value:function(e){var t=Number(Ye.getInstance().decode(e).n),r=Number(Ye.getInstance().decode(e).n),n=Number(Ye.getInstance().decode(e).n),i=Gt.decode(e);return new Yt({major:t,minor:r,patch:n},i)}}]),e}(),Gt=function(){function e(){Lt(this,e)}return zt(e,null,[{key:"decode",value:function(t){var r=t.bits8(4);switch(r){case 0:var n=Number(Ye.getInstance().decode(t).n),i="i_".concat(n);return Ht.Var(new $t(i,n));case 1:var o=e.decode(t);return Ht.Delay(o);case 2:var a=e.decode(t);return Ht.LamAbs("i_0",a);case 3:var u=e.decode(t),s=e.decode(t);return Ht.Apply(u,s);case 4:return Ht.Const(jt.getInstance().decode(t));case 5:var c=e.decode(t);return Ht.Force(c);case 6:return Ht.Error();case 7:return Ht.Builtin(Ct.getInstance().decode(t));default:throw new Error("Not found tag: ".concat(r))}}}]),e}();function Qt(e){return Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(e)}function Xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,er(n.key),n)}}function er(e){var t=function(e,t){if("object"!=Qt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Qt(t)?t:String(t)}var tr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"decodeFlat",value:function(e){var t=new nt(e);return Zt.decode(t)}}],null&&Xt(t.prototype,null),r&&Xt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),rr=function(e){var t,r,n=function(e){if((e=e.startsWith("0x")?e.slice(2):e).length%2!=0)throw new Error("Invalid hex string");for(var t=new Uint8Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=parseInt(e.substring(r,r+2),16);return t}(e),i=function(e){for(var t=new Int8Array(e.length),r=0;r<e.length;r++)t[r]=e[r]<<24>>24;return t}(re(n)),o=tr.decodeFlat(i),a=(t=o.term,r=0,function e(t,n){switch(t.type){case Jt.Var:var i,o=n[t.name.index-1],a=new $t(o,null===(i=t.name)||void 0===i?void 0:i.index);return Ht.Var(a);case Jt.LamAbs:var u="i_".concat(r);return r+=1,Ht.LamAbs(u,e(t.term,[u].concat(function(e){if(Array.isArray(e))return qt(e)}(l=n)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(l)||function(e,t){if(e){if("string"==typeof e)return qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(e,t):void 0}}(l)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())));case Jt.Apply:var s=t.f,c=t.arg;return Ht.Apply(e(s,n),e(c,n));case Jt.Force:return Ht.Force(e(t.term,n));case Jt.Delay:return Ht.Delay(e(t.term,n));case Jt.Const:case Jt.Builtin:case Jt.Error:return t;default:throw new Error("not found term type")}var l}(t,[]));return new Yt(o.version,a)},nr=function(e){return rr(e).pretty()},ir=function(e){var t=rr(e),r=t.term.pretty()||"";return{version:t.version,data:yt(r)}};return t})()));
//# sourceMappingURL=index.js.map